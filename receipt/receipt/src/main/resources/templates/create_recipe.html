<form action="/create_recipe" method="POST" enctype="multipart/form-data" xmlns:th="http://www.w3.org/1999/xhtml">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    <div>
        <label for="name">Название рецепта:</label>
        <input type="text" id="name" name="name" value="Омлет с овощами" required>
    </div>

    <div>
        <label for="description">Описание:</label>
        <textarea id="description" name="description" required>Вкусный и питательный омлет с овощами.</textarea>
    </div>

    <div>
        <label for="theme">Тема блюда:</label>
        <select id="theme" name="theme" required>
            <option value="breakfast" selected>Завтрак</option>
            <option value="lunch">Обед</option>
            <option value="dinner">Ужин</option>
            <option value="snack">Перекус</option>
            <option value="holiday">Праздничное блюдо</option>
        </select>
    </div>

    <div>
        <label for="typeOfFood">Тип блюда:</label>
        <select id="typeOfFood" name="typeOfFood">
            <option value="soup">Суп</option>
            <option value="meat">Мясо</option>
            <option value="salad">Салат</option>
            <option value="dessert">Десерт</option>
            <option value="sideDish" selected>Гарнир</option>
        </select>
    </div>

    <div>
        <label for="typeOfCook">Тип приготовления:</label>
        <select id="typeOfCook" name="typeOfCook">
            <option value="pan" selected>Сковорода</option>
            <option value="pot">Кастрюля</option>
            <option value="oven">Духовка</option>
            <option value="grill">Гриль</option>
            <option value="steamer">Пароварка</option>
        </select>
    </div>

    <div>
        <label for="restrictions">Ограничения:</label>
        <select id="restrictions" name="restrictions">
            <option value="">Выберите ограничение</option>
            <option value="no_sugar">Без сахара</option>
            <option value="no_gluten">Без глютена</option>
            <option value="no_dairy" selected>Без молочных продуктов</option>
            <option value="vegan">Веган</option>
            <option value="nut_allergy">Без орехов</option>
        </select>
    </div>

    <div>
        <label for="countPortion">Количество порций:</label>
        <input type="number" id="countPortion" name="countPortion" value="2" required>
    </div>

    <div>
        <label for="kkal">Калорийность (ккал):</label>
        <input type="number" id="kkal" name="kkal" value="300" required>
    </div>

    <div>
        <label for="timeToCook">Время приготовления (мин):</label>
        <input type="number" id="timeToCook" name="timeToCook" value="20" required>
    </div>

    <div>
        <label for="photoFood">Фото блюда:</label>
        <input type="file" id="photoFood" name="photoFood" accept="image/*" required>
    </div>


    <div id="stepsContainer">
        <div class="step">
            <label for="stepDescription1">Описание шага 1:</label>
            <textarea id="stepDescription1" name="stepDescriptions" required></textarea>

            <label for="stepPhoto1">Фото шага 1:</label>
            <input type="file" id="stepPhoto1" name="stepPhotos" accept="image/*" required>
        </div>
    </div>

    <button type="button" onclick="addStep()">Добавить шаг</button>
    <button type="submit">Создать рецепт</button>
</form>

<script>
    let stepCounter = 1;

    function addStep() {
        stepCounter++;

        const stepsContainer = document.getElementById("stepsContainer");

        const stepDiv = document.createElement("div");
        stepDiv.classList.add("step");

        stepDiv.innerHTML = `
            <label for="stepDescription${stepCounter}">Описание шага ${stepCounter}:</label>
            <textarea id="stepDescription${stepCounter}" name="stepDescriptions" required></textarea>

            <label for="stepPhoto${stepCounter}">Фото шага ${stepCounter}:</label>
            <input type="file" id="stepPhoto${stepCounter}" name="stepPhotos" accept="image/*" required>
        `;

        stepsContainer.appendChild(stepDiv);
    }
</script>
