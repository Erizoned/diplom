<app-header [pageTitle]="'–†–µ—Ü–µ–ø—Ç—ã'"></app-header>
<div class="main-container" style="margin-top: 80px; padding: 20px;">
  <div class="search-section">
    <form (submit)="onFilter($event)" class="search-form">
      <div class="search-container">
        <input id="search" type="text" name="keyword" [(ngModel)]="keyword" placeholder="–ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤..." />
        <button type="submit" class="search-button">–ù–∞–π—Ç–∏</button>
        <button type="button" class="filter-button" (click)="toggleDiv()">–§–∏–ª—å—Ç—Ä—ã</button>
      </div>
    </form>

    <div id="filterDiv" class="filter-container"   [ngStyle]="{ display: filterVisible ? 'block' : 'none' }">
      <form (submit)="onFilter($event)">
        <div>
          <label for="theme">–¢–µ–º–∞ –±–ª—é–¥–∞:</label>
          <select id="theme" name="theme" [(ngModel)]="filter.theme">
            <option value="">–í—Å–µ</option>
            <option value="–ó–∞–≤—Ç—Ä–∞–∫">–ó–∞–≤—Ç—Ä–∞–∫</option>
            <option value="–û–±–µ–¥">–û–±–µ–¥</option>
            <option value="–£–∂–∏–Ω">–£–∂–∏–Ω</option>
            <option value="–ü–µ—Ä–µ–∫—É—Å">–ü–µ—Ä–µ–∫—É—Å</option>
            <option value="–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ">–ü—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ –±–ª—é–¥–æ</option>
          </select>
        </div>

        <div>
          <label for="typeOfFood">–¢–∏–ø –±–ª—é–¥–∞:</label>
          <select id="typeOfFood" name="typeOfFood" [(ngModel)]="filter.typeOfFood">
            <option value="">–í—Å–µ</option>
            <option value="–°—É–ø">–°—É–ø</option>
            <option value="–ú—è—Å–æ">–ú—è—Å–æ</option>
            <option value="–°–∞–ª–∞—Ç">–°–∞–ª–∞—Ç</option>
            <option value="–î–µ—Å–µ—Ä—Ç">–î–µ—Å–µ—Ä—Ç</option>
            <option value="–ì–∞—Ä–Ω–∏—Ä">–ì–∞—Ä–Ω–∏—Ä</option>
          </select>
        </div>

        <div>
          <label for="typeOfCook">–¢–∏–ø –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</label>
          <select id="typeOfCook" name="typeOfCook" [(ngModel)]="filter.typeOfCook">
            <option value="">–í—Å–µ</option>
            <option value="–°–∫–æ–≤–æ—Ä–æ–¥–∞">–°–∫–æ–≤–æ—Ä–æ–¥–∞</option>
            <option value="–ö–∞—Å—Ç—Ä—é–ª—è">–ö–∞—Å—Ç—Ä—é–ª—è</option>
            <option value="–î—É—Ö–æ–≤–∫–∞">–î—É—Ö–æ–≤–∫–∞</option>
            <option value="–ì—Ä–∏–ª—å">–ì—Ä–∏–ª—å</option>
            <option value="–ü–∞—Ä–æ–≤–∞—Ä–∫–∞">–ü–∞—Ä–æ–≤–∞—Ä–∫–∞</option>
          </select>
        </div>

        <div>
          <label for="restrictions">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:</label>
          <select id="restrictions" name="restrictions" [(ngModel)]="filter.restrictions">
            <option value="">–í—Å–µ</option>
            <option value="–ë–µ–∑ —Å–∞—Ö–∞—Ä–∞">–ë–µ–∑ —Å–∞—Ö–∞—Ä–∞</option>
            <option value="–ë–µ–∑ –≥–ª—é—Ç–µ–Ω–∞">–ë–µ–∑ –≥–ª—é—Ç–µ–Ω–∞</option>
            <option value="–ë–µ–∑ –º–æ–ª–æ—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤">–ë–µ–∑ –º–æ–ª–æ—á–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤</option>
            <option value="–í–µ–≥–∞–Ω">–í–µ–≥–∞–Ω</option>
            <option value="–ë–µ–∑ –æ—Ä–µ—Ö–æ–≤">–ë–µ–∑ –æ—Ä–µ—Ö–æ–≤</option>
          </select>
        </div>

        <div>
          <label for="countPortion">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π:</label>
          <input type="number" id="countPortion" name="countPortion" [(ngModel)]="filter.countPortion">
        </div>

        <div>
          <label for="kkal">–ö–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å (–∫–∫–∞–ª):</label>
          <input type="number" id="kkal" name="kkal" [(ngModel)]="filter.kkal">
        </div>

        <div>
          <label for="timeToCook">–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (–º–∏–Ω):</label>
          <input type="number" id="timeToCook" name="timeToCook" [(ngModel)]="filter.timeToCook">
        </div>

        <button type="submit">–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
      </form>
    </div>
  </div>

  <div class="actions-container">
    <a routerLink="/create_recipe" class="create-recipe-button">
      + –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ä–µ—Ü–µ–ø—Ç
    </a>
  </div>

  <div class="ai-panel">
    <button (click)="openGemini()" class="gemini-button">
      <span class="icon">ü§ñ</span> –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é –ò–ò
    </button>
    <button (click)="openRecipeCreator()" class="gemini-button">
      <span class="icon">‚ú®</span> –°–æ–∑–¥–∞–Ω–∏–µ –ò–ò —Ä–µ—Ü–µ–ø—Ç–∞
    </button>
    <button (click)="openDietCreator()" class="gemini-button">
      <span class="icon">ü•ó</span> –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–µ—Ç—ã
    </button>
  </div>

  <div class="recipe-container">
    <div *ngFor="let recipe of recipes; let i = index" class="recipe-card" [ngClass]="{'new-recipe': recipe.new}">
      <a [routerLink]="['/recipe', recipe.id]">
        <img *ngIf="recipe.photos && recipe.photos.length > 0"
             [src]="getPhotoUrl(recipe.photos[0].name)"
             alt="–§–æ—Ç–æ –±–ª—é–¥–∞"
             class="recipe-image" />
        <img *ngIf="!recipe.photos || recipe.photos.length === 0"
             src="/static/images/default-recipe.png"
             alt="–ù–µ—Ç —Ñ–æ—Ç–æ"
             class="recipe-image" />
        <div class="recipe-details">
          <div class="recipe-title">{{ recipe.name }}</div>
          <div class="recipe-description">{{ recipe.description }}</div>
          <div class="recipe-time">–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è: {{ recipe.timeToCook }} –º–∏–Ω—É—Ç</div>
        </div>
      </a>
    </div>
  </div>
</div>
