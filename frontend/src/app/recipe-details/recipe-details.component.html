<div class="container">
    <h1>{{ recipe.name }}</h1>
    <div class="recipe-description">
      <p>{{ recipe.description }}</p>
    </div>
  
    <h2>–§–æ—Ç–æ –±–ª—é–¥–∞:</h2>
    <div class="photos">
      <img *ngIf="recipe.photos && recipe.photos.length > 0"
      [src]="getPhotoUrl(recipe.photos[0].name)"
      alt="–§–æ—Ç–æ –±–ª—é–¥–∞"
      class="recipe-image" />
 <img *ngIf="!recipe.photos || recipe.photos.length === 0"
      src="/static/images/default-recipe.png"
      alt="–ù–µ—Ç —Ñ–æ—Ç–æ"
      class="recipe-image" />
    </div>
  
    <h2>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã:</h2>
    <div class="ingredients">
      <ng-container *ngIf="recipe.ingredients?.length > 0; else noIngredients">
        <div *ngFor="let ingredient of recipe.ingredients">
          <p>
            <strong>{{ ingredient.name }}</strong>: {{ ingredient.count }} {{ingredient.unit}}
          </p>
        </div>
      </ng-container>
      <ng-template #noIngredients>
        <p>–ò–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</p>
      </ng-template>
    </div>
  
    <h2>–®–∞–≥–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</h2>
    <div class="steps">
      <ng-container *ngIf="recipe.steps?.length > 0; else noSteps">
        <div *ngFor="let step of recipe.steps">
          <h3>–®–∞–≥ {{ step.stepNumber }}</h3>
          <p>{{ step.description }}</p>
          <img
            *ngIf="step.photo"
            [src]="getPhotoUrl(step.photo.name)"
            alt="–§–æ—Ç–æ —à–∞–≥–∞ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è"
          />
        </div>
      </ng-container>
      <ng-template #noSteps>
        <p>–®–∞–≥–∏ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</p>
      </ng-template>
    </div>
  
    <div class="details">
      <p><strong>–¢–µ–º–∞ –±–ª—é–¥–∞:</strong> {{ recipe.theme }}</p>
      <p><strong>–¢–∏–ø –±–ª—é–¥–∞:</strong> {{ recipe.typeOfFood }}</p>
      <p><strong>–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫—É—Ö–Ω—è:</strong> {{ recipe.nationalKitchen }}</p>
      <p><strong>–¢–∏–ø –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</strong> {{ recipe.typeOfCook }}</p>
      <p><strong>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:</strong> {{ recipe.restrictions }}</p>
      <p><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π:</strong> {{ recipe.countPortion }}</p>
      <p><strong>–ö–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å (–∫–∫–∞–ª):</strong> {{ recipe.kkal }}</p>
      <p><strong>–í—Ä–µ–º—è –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è:</strong> {{ recipe.timeToCook }} –º–∏–Ω—É—Ç</p>
    </div>
  
    <p><strong>–ê–≤—Ç–æ—Ä —Ä–µ—Ü–µ–ø—Ç–∞:</strong> {{ recipe.authorUsername }}</p>
    <button class="delete-button" (click)="onDeleteRecipe()">–£–¥–∞–ª–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>
    <button class="button" (click)="onUpdateRecipe()">–û–±–Ω–æ–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç</button>
  
    <div *ngIf="errorMessage" style="color: red; font-weight: bold; margin-bottom: 20px;">
      <p>{{ errorMessage }}</p>
    </div>
    <!-- –°–µ–∫—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ -->
    <h2>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</h2>
    <div class="comment-form">
      <input 
        [(ngModel)]="newComment" 
        placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." 
        class="comment-input"
      />
      <button class="button" (click)="addComment()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
    <div class="comments-section">
      <ng-container *ngIf="comments !== undefined && comments.length > 0; else noComments">
        <div *ngFor="let comment of comments" class="comment">
          <div class="comment-header">
            <strong>{{ comment.author || '–ê–Ω–æ–Ω–∏–º–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å' }}</strong>
          </div>
          <div class="comment-content">
            <p>{{ comment.content }}</p>
          </div>
          <div class="comment-actions">
            <span class="likes" 
            [class.active]="comment.reaction === 'liked'"
            (click)="likeComment(comment.id)">
        <span class="like-count">{{ comment.likes || 0 }}</span> üëç
      </span>
      <span class="dislikes" 
            [class.active]="comment.reaction === 'disliked'"
            (click)="dislikeComment(comment.id)">
        <span class="dislike-count">{{ comment.dislikes || 0 }}</span> üëé
      </span>
          </div>          
        </div>
      </ng-container>
      <ng-template #noComments>
        <p>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</p>
      </ng-template>
    </div>
    <a (click)="goBack()" class="back-link">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É —Ä–µ—Ü–µ–ø—Ç–æ–≤</a>
  </div>
  